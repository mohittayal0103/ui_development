<!DOCTYPE html>
<html>

<head>
  <style>
    h1,
    h2 {
      color: orange;
      text-align: center;
    }

    table {
      border-collapse: collapse;
    }

    tr,
    th,
    td {
      border: 0.5px solid skyblue;
      padding: 10px 50px 10px;
    }

    tr,
    td {
      text-align: left;
    }
  </style>
  <script>
    const getUser = () => {
      fetch("http://localhost:3000/userapi")
        .then(response => response.json())
        .then(userArray => {
          let data = "";
          userArray.map((user, index) => {
            data = data + "<tr>";
            data = data + "<td>" + user.id + "</td>";
            data = data + "<td>" + user.fullname + "</td>";
            data = data + "<td>" + user.age + "</td>";
            data = data + "<td>" + user.edu + "</td>";
            data = data + "<td>" + user.exp + "</td>";
            data = data + "<td> <button> Edit </button> </td>";
            data = data + "<td> <button> Delete </button> </td>";
            data = data + "</tr>";
          })
          document.getElementById("container").innerHTML = data;
        })
    }

    const save = () => {
      let userName = document.getElementById("uname").value;
      let userAge = document.getElementById("uage").value;
      let userEdu = document.getElementById("uedu").value;
      let userExp = document.getElementById("uexp").value;

      let url = "http://localhost:3000/userapi";
      // alert(userName + userAge + userEdu + userExp);
      let newUser = { fullname: userName, age: userAge, edu: userEdu, exp: userExp };
      let postData = {
        headers: { "Content-Type": "application/json" },
        method: "POST",
        body: JSON.stringify(newUser)
      }
      fetch(url, postData)
        .then(response = response.json())
        .then(userInfo => {
          alert(userName + "save with id : " + userInfo.id);
          getUser();
        })
    }


  </script>
</head>

<body align="center" onload="getUser()">
  <h1> HomeWork 1 </h1>


  <table align="Center" cellpadding="15">
    <caption>
      <h2> Add or Update User Details </h2>
    </caption>
    <tr>
      <th> Full Name </th>
      <td> <input type="text" id="uname" /> </td>
    </tr>
    <tr>
      <th> Age </th>
      <td> <input type="text" id="uage" /> Years </td>
    </tr>
    <tr>
      <th> Education </th>
      <td> <input type="text" id="uedu" /></td>
    </tr>
    <tr>
      <th> Experiance </th>
      <td> <input type="text" id="uexp" /> Years </td>
    </tr>
    <tr>
      <th colspan="2" align="center"> <button onclick="save()"> Save </button> </th>
    </tr>
  </table>

  <br /> <br />

  <table align="Center" cellpadding="15">
    <caption>
      <h2> User List </h2>
    </caption>
    <thead>
      <tr>
        <th> User Id </th>
        <th> Full Name </th>
        <th> Age </th>
        <th> Education </th>
        <th> Experience </th>
        <th> Update </th>
        <th> Delete </th>
      </tr>
    </thead>
    <tbody id="container"></tbody>
  </table>
</body>

</html>